language: bash
services: docker

env: DIR=1.8 VARIANT=otp-22

script:
  - docker-compose build
  - docker-compose up -d
  - sleep 2m
  - curl -X GET http://localhost:4000/api/users/1 -H 'Content-Type: application/json' -H 'Postman-Token: bd33ccdd-503d-48b7-a687-081a675e9004' -H 'cache-control: no-cache' -d '{"user": {"email": "johny@test.com", "firstname": "johny", "lastname": "doe", "password": "testhash", "roles": 1}}'

after_script:
  - docker-compose ps

notifications:
  webhooks: https://outlook.office.com/webhook/fda60e47-d851-46da-9879-4a6c58bbfc04@901cb4ca-b862-4029-9306-e5cd0f6d9f86/TravisCI/7ca4246150114f65a5b731008b9d8bc6/c755656a-9f25-4fa1-8c17-f1c880043093
